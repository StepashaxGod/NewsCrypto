<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="CryptoQuick - fresh crypto news and analytics."
    />
    <title>CryptoQuick</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/generic-styles.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/main.css" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container-header">
        <div class="container-left">
          <img src="/assets/images/solana-sol-logo.png" alt="Solana logo" />
          <h1 class="header-title">QuickCrypto</h1>
          <nav><a href="#">new</a> | <a href="past.html">past</a> |</nav>
          <time class="date-time"></time>
        </div>
        <div class="container-right">
          <a class="login-link" href="/login.html">login</a>
          <a class="register-link" href="/register.html">Register</a>
        </div>
      </div>
    </header>

    <!-- adaptive news section -->
    <section class="news-container"></section>

    <script type="module" src="/js/app.js"></script>
    <script>
      fetch("/user")
        .then((response) => response.json())
        .then((data) => {
          if (data.loggedIn) {
            const loginLink = document.querySelector(".login-link");
            if (loginLink) {
              loginLink.remove();
            }

            let userDisplay = document.getElementById("user-display");
            if (!userDisplay) {
              userDisplay = document.createElement("span");
              userDisplay.id = "user-display";

              const header = document.querySelector(".container-right");
              header.appendChild(userDisplay);
            }
            userDisplay.textContent = data.nickname;
          }
        })
        .catch((err) => console.error("Error!", err));
    </script>
  </body>
</html>
